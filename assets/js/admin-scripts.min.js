var epdp_admin_vars;jQuery(document).ready(function(a){a(".epdp_select_chosen").chosen({inherit_select_classes:!0}),epdp_admin_vars.hide_save_settings&&a("#submit").hide();var b=a(".epdp-color-picker");b.length&&b.wpColorPicker(),a(document.body).on("click",".epdp_copy_shortcode",function(){this.focus(),this.select()}),{init:function(){this.api()},api:function(){a(document.body).on("click","#epdp-phrase",function(){this.focus(),this.select()}),a(document.body).on("click","#epd-remote-phrase-button",function(b){b.preventDefault();var c={action:"epdp_reenter_remote_phrase"};a.ajax({type:"POST",dataType:"json",data:c,url:ajaxurl,beforeSend:function(){a("#epd-remote-phrase-button").html(epdp_admin_vars.please_wait),a("#epd-remote-phrase-button").prop("disabled",!0),a("#epd-remote-phrase-div").remove()},success:function(b){!0===b.success&&""!==b.data.input&&a("#epd-remote-phrase-button").replaceWith(b.data.input)}}).fail(function(a){window.console&&window.console.log&&console.log(a)})}),a(document.body).on("change",".epdp_enable_rest",function(){a(this).is(":checked")?(a("#epdp-reveal-secret-button").prop("disabled",!1),a("#epdp-regenerate-secret").prop("disabled",!1)):(a("#epdp-reveal-secret-button").prop("disabled",!0),a("#epdp-regenerate-secret").prop("disabled",!0))}),a(document.body).on("click","#epdp-reveal-secret-button",function(b){b.preventDefault();var c='<button id="epdp-reveal-secret-button" type="button" class="button epd-button">'+epdp_admin_vars.reveal_phrase+"</button>",d='<p class="description">'+epdp_admin_vars.phrase_desc+"</p>",e={action:"epdp_reveal_phrase"};a.ajax({type:"POST",dataType:"json",data:e,url:ajaxurl,beforeSend:function(){a("#epdp-reveal-secret-button").html(epdp_admin_vars.please_wait),a("#epdp-reveal-secret-button").prop("disabled",!0),a("#epdp-regenerate-secret").prop("disabled",!0)},success:function(b){if(!0===b.success&&""!==b.data.phrase){var e='<input type="text" id="epdp-phrase" class="regular-text" readonly="readonly" value="'+b.data.phrase+'" />';a("#epdp-api-key-display").html(e+d),setTimeout(function(){a("#epdp-api-key-display").html(c+d),a("#epdp-regenerate-secret").prop("disabled",!1)},1e4)}}}).fail(function(a){window.console&&window.console.log&&console.log(a)})}),a(document.body).on("click","#epdp-regenerate-secret",function(b){b.preventDefault();var c={action:"epdp_regenerate_phrase"};a.ajax({type:"POST",dataType:"json",data:c,url:ajaxurl,beforeSend:function(){a("#epdp-regenerate-secret").html(epdp_admin_vars.please_wait),a("#epdp-reveal-secret-button").prop("disabled",!0),a("#epdp-regenerate-secret").prop("disabled",!0)},success:function(b){!0===b.success&&(a("#epdp-regenerate-secret").html(epdp_admin_vars.done),setTimeout(function(){a("#epdp-regenerate-secret").html(epdp_admin_vars.regenerate_key),a("#epdp-reveal-secret-button").prop("disabled",!1),a("#epdp-regenerate-secret").prop("disabled",!1)},3e3))}}).fail(function(a){window.console&&window.console.log&&console.log(a)})})}}.init();var c={init:function(){this.add(),this.options(),this.clone(),this.theme(),this.remove()},clone_repeatable:function(b){var c=1,d=1;return b.parent().find(".epdp_repeatable_row").each(function(){var b=a(this).data("key");parseInt(b)>d&&(d=b)}),c=d+=1,clone=b.clone(),clone.removeClass("epdp_add_blank"),clone.attr("data-key",c),clone.find("input, select, textarea").val("").each(function(){var b=a(this).attr("name"),d=a(this).attr("id");b&&(b=b.replace(/\[(\d+)\]/,"["+parseInt(c)+"]"),a(this).attr("name",b)),a(this).attr("data-key",c),void 0!==d&&(d=d.replace(/(\d+)/,parseInt(c)),a(this).attr("id",d))}),clone.find("select").each(function(){a(this).val(b.find('select[name="'+a(this).attr("name")+'"]').val())}),clone.find('input[type="checkbox"]').each(function(){a(this).is(":checked")&&a(this).prop("checked",!1),a(this).val(1)}),clone.find(".search-choice").remove(),clone.find(".chosen-container").remove(),clone},add:function(){a(document.body).on("click",".submit .epdp_add_repeatable",function(b){b.preventDefault();var d=a(this),e=d.parent().parent().prev(".epdp_repeatable_row"),f=c.clone_repeatable(e);f.insertAfter(e).find("input, textarea, select").filter(":visible").eq(0).focus(),f.find(".epdp_select_chosen").chosen({inherit_select_classes:!0}),f.find(".epdp_select_chosen").css("width","100%"),f.find(".epdp_select_chosen").val("0"),f.find(".epdp_select_chosen").trigger("chosen:updated")})},options:function(){a(document.body).on("change","#epdp-add-custom-welcome",function(){a("#epdp-welcome-editor").slideToggle(500)}),a(document.body).on("change","#epdp-registration-action",function(){"redirect"===a("#epdp-registration-action").val()?(a("#epdp-redirect-page").show(),a("#epdp-redirect-page").css("display","inline-block")):a("#epdp-redirect-page").hide()})},clone:function(){a(document.body).on("change","#epdp-clone-site",function(){"0"!==a("#epdp-clone-site").val()?(a("#epdp-clone-plugins").show(),a("#epdp-clone-plugins").css("display","inline-block"),a("#epdp-clone-themes").show(),a("#clone-themes-action-chosen").css("display","inline-block")):(a("#epdp-clone-plugins").hide(),a("#epdp-clone-themes").hide())})},theme:function(){a(document.body).on("change","#hide-appearance-menu",function(){a("#epdp-allowed-themes").toggle("fast")})},remove:function(){a(document.body).on("click",".epdp-remove-row, .epdp_remove_repeatable",function(b){b.preventDefault();var c,d,e,f=a(this).parents(".epdp_repeatable_row"),g=f.parent().find(".epdp_repeatable_row").length,h=a(this).data("type"),i="div.epdp_repeatable_"+h+"s";if(c=a(this).is(".ui-sortable .epdp_repeatable_row:first-child .epdp-remove-row, .ui-sortable .epdp_repeatable_row:first-child .epdp_remove_repeatable")?f.next(".epdp_repeatable_row"):f.prev(".epdp_repeatable_row"),d=c.find("select, input, textarea, button").filter(":visible"),e=d.eq(0),g>1)a("input, select",f).val(""),f.fadeOut("fast").remove(),e.focus();else switch(h){case"file":a("input, select",f).val("");break;default:a("input, select",f).val("")}a(i).each(function(b){a(this).find("input, select").each(function(){var c=a(this).attr("name");c=c.replace(/\[(\d+)\]/,"["+b+"]"),a(this).attr("name",c).attr("id",c)})})})}};c.init()});